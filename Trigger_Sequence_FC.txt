CREATE OR REPLACE
TRIGGER QTENOTNEGATIVE
BEFORE UPDATE OF QTESTOCK ON INVENTAIRE
for each row
DECLARE 
MESSAGE EXCEPTION;
QTESTOCKCHECK NUMBER;
BEGIN
  Select qtestock into QTESTOCKCHECK from inventaire;
  IF (QTESTOCKCHECK < 0)
  THEN RAISE MESSAGE;
  END IF;
  EXCEPTION
  WHEN MESSAGE THEN RAISE_APPLICATION_ERROR(-20324,'Vous ne pouvez pas avoir une valeur négative de stock');
END;

CREATE OR REPLACE
TRIGGER INCPRODUIT
BEFORE INSERT ON PRODUIT
FOR EACH ROW
BEGIN
IF :NEW.IDPRODUIT IS NULL THEN
SELECT SEQ_PRODUIT .NEXTVAL INTO :NEW.IDPRODUIT FROM DUAL;
END IF;
END;


CREATE SEQUENCE  "ANALYSTE_OPE_FC"."SEQ_PRODUIT"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
 
